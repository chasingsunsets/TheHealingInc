{{!-- <link rel="stylesheet" href="/css/quiz.css"> --}}

<style>
p {
    font: poppins;
}
   /* Style the form */
.quiz-container {
    background-image: url("/img/account-page.png");
    background-repeat: no-repeat;
    background-size: contain;
    background-position: center;
    top: 50%;
    left: 50%;
    padding: 100px;
    width: 100%;
    text-align: center;
}

/* Style the input fields */
input[type="text"]{
    border: 2px solid #E8DCD0;
    border-radius: 30px;
    background-color: #E8DCD0;
    width: 500px;
    height: 50px;
    display: inline-block;
    font-size: 25px;
    text-align: center;
}

#border {
    border: 2px solid #E8DCD0;
    border-radius: 15px;
    background-color: #E8DCD0;
    width: 500px;
    height: 50px;
    display: inline-block;
}

/* Mark input boxes that gets an error on validation: */
input.invalid {
  background-color: #ffdddd;
}

/* Hide all steps by default: */
.tab {
    display: none;
    font-weight: 400;
    line-height: 60px;
}

.qn {
    font-family: 'Libre Baskerville';
    font-style: italic;
    font-size: 30px;
}

/* Make circles that indicate the steps of the form: */
.step {
  height: 15px;
  width: 15px;
  margin: 0 2px;
  background-color: #bbbbbb;
  border: none; 
  border-radius: 50%;
  display: inline-block;
  opacity: 0.5;
}

/* Mark the active step: */
.step.active {
  opacity: 1;
}

/* Mark the steps that are finished and valid: */
.step.finish {
  background-color: #4CAF50;
}

button {
    font-size: 20px;
    color: rgb(0, 0, 0);
    background-color: #8BAD97;
    border: 5px;
    border-radius: 45px;
    padding: 15px;
    cursor: pointer;
    margin-bottom: 20px;
    text-align: center;
}

button:hover {
    background-color: #bdd4c5;;
}

input[type="radio"] {
    appearance: none;
}

input[type="radio"]{
    cursor: pointer;
    position: relative;
    padding-left: 30px;
    line-height: 20px;
}

input[type="radio"]::before {
    content: "";
    display: inline-block;
    width: 20px;
    aspect-ratio: 1;
    border: 1px solid #000000;
    border-radius: 50%;
    position: absolute;
    top: 50%;
    left: 0;
    transform: translateY(-50%);
    opacity: 1;
    transition: all 0.3s;
}

input[type="radio"]::after {
    content: "";
    display: inline-block;
    width: 10px;
    aspect-ratio: 1;
    border: 1px solid #8BAD97;
    background: #8BAD97;
    border-radius: 50%;
    position: absolute;
    left: 5px;
    top: 50%;
    transform: translateY(-50%);
    opacity: 0;
    transition: all 0.3s;
}

input[type="radio"]:checked::after {
    opacity: 1;
}

.option {
    line-height: 1.5;
    font-size: 24px;
}

.list {
  margin-top:40px;
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  gap:20px;
  text-align: center;
  margin:0px;
  padding:0px;
  box-sizing:border-box;
}
.form-element {
  position:relative;
  width:100px;
  height:100px;
}
.form-element input {
  display:none;
}
.form-element label {
  width:100%;
  display:flex;
  flex-direction:column;
  justify-content:center;
  height:100%;
  cursor:pointer;
  border:2px solid #ddd;
  background:#fff;
  box-shadow:0px 5px 20px 2px rgba(0,0,0,0.1);
  text-align:center;
  transition:all 200ms ease-in-out;
  border-radius:5px;
}
.form-element .icon {
  margin-top:10px;
  font-size:30px;
  color:#555;
  transition:all 200ms ease-in-out;
}
.form-element .title {
  font-size:15px;
  color:#555;
  padding:5px 0px;
  transition:all 200ms ease-in-out;
}
.form-element label:before {
  content:"âœ“";
  position:absolute;
  width:18px;
  height:18px;
  top:8px;
  left:8px;
  background:#ffaa00;
  color:#fff;
  text-align:center;
  line-height:18px;
  font-size:14px;
  font-weight:600;
  border-radius:50%;
  opacity:0;
  transform:scale(0.5);
  transition:all 200ms ease-in-out;
}
.form-element input:checked + label:before {
  opacity:1;
  transform:scale(1);
}
.form-element input:checked + label .icon {
  color:#ffaa00;
}
.form-element input:checked + label .title {
  color:#ffaa00;
}
.form-element input:checked + label {
  border:2px solid #ffaa00;
}

</style>

{{!-- <body>
    <section class="quiz">
        <div class="quiz-container">
            <div class="title">Personalization Quiz</div>

            <br>
            
            <form action="" method="POST" class="quiz-form">
                <fieldset>
                    <div id="question" class="question">
                        <label class="quiz-step step1 current">
                            Name your Quiz
                        </label>
                        <br>
                        <label class="option" id="border">
                            <input type="text" name="quizName" />
                        </label>
                    
                        <br>
                    
                        <label class="quiz-step step2">
                            What is your age?
                        </label>
                    
                        <br>
                        <label class="option" id="border">
                            <input type="text" name="age" />
                        </label>
                    
                        <br>
                    
                        <label class="quiz-step step2">
                            Have you taken supplements/ traditional chinese medicine in the past?
                        </label>
                        <br>
                        <label class="option" id="border">
                            <label class="option" id="border">
                                <input type="radio" name="supplements" value="yes" />
                                <span class="option1">Yes</span>
                            </label>
                            <br>
                            <label class="option" id="border">
                                <input type="radio" name="supplements" value="no" />
                                <span class="option2">No</span>
                            </label>
                        </label>
                    
                        <br>
                    
                        <label class="quiz-step step2">
                            Which areas of health are you looking to improve?
                        </label>
                        <br>
                        <label class="option" id="border">
                            <input type="radio" name="area" value="immunity" />
                            <span class="option1">Immunity</span>
                        </label>
                        <br>
                        <label class="option" id="border">
                            <input type="radio" name="area" value="hair" />
                            <span class="option2">Hair</span>
                        </label>
                        <br>
                        <label class="option" id="border">
                            <input type="radio" name="area" value="stress">
                            <span class="option3">Stress</span>
                        </label>
                        <br>
                        <button type="submit">Save</button>
                    </div>
                </fieldset>
            </form>
            <div id="question" class="question"></div>

            <br>

            <br>
            <br>
            <!-- Buttons -->
            <div class="controls">
                <button class="previous"><i class="fa-solid fa-left-long"></i> Previous</button>
                <button class="next"><i class="fa-solid fa-arrow-right-long"></i> Next</button>
            </div>
        </div>

        <div class="result">

        </div>
    </section>

</body> --}}

<div class="quiz-container">
    <form id="regForm" action="" method="POST">
    
        <p>Personalization Quiz</p>
    
        <!-- One "tab" for each step in the form: -->
        <div class="tab">
            <div class="qn">Name your quiz</div>
            <p><input type="text" placeholder="Chantalle's Headache Remedy" oninput="this.className = ''" name="quizName">
            </p>
        </div>
    
        <div class="tab">
            <div class="qn">What is your age?</div>
            <p><input type="text" placeholder="35" oninput="this.className = ''" name="age"></p>
        </div>
    
        {{!-- <div class="tab">When is your birthday?
            <p><input type="date" oninput="this.className = ''"></p>
        </div> --}}
    
        <div class="tab form-check">
            <div class="qn">When it comes to traditional chinese medicine, you:</div>
            <label class="option" id="border">
                <input type="radio" name="tcm" value="yes" />
                <span class="option1">Know more than the average person.</span>
            </label>
            <br>
            <label class="option" id="border">
                <input type="radio" name="tcm" value="sometimes" />
                <span class="option1">Know a bit, but want to learn more.</span>
            </label>
            <br>
            <label class="option" id="border">
                <input type="radio" name="tcm" value="never" />
                <span class="option1">Are not convinced yet.</span>
            </label>
        </div>
    
        <div class="tab">
            <div class="qn">Have you taken supplements/ traditional chinese medicine in the past?</div>
            <label class="option" id="border">
                <input type="radio" name="supplements" value="yes" />
                <span class="option1">For a while</span>
            </label>
            <br>
            <label class="option" id="border">
                <input type="radio" name="supplements" value="sometimes" />
                <span class="option1">On and Off</span>
            </label>
            <br>
            <label class="option" id="border">
                <input type="radio" name="supplements" value="never" />
                <span class="option1">Never</span>
            </label>
        </div>
    
        <div class="tab">
            <div class="qn">Which areas of health are you looking to improve?</div>
            <p>You can choose more than 1 area.</p>
            <div class="list">
                <div class="form-element">
                    <input type="checkbox" name="area" value="immunity" id="immunity">
                    <label for="immunity">
                        <div class="icon">
                            <i class="fa-solid fa-virus-covid"></i>
                            <p class="title">Immunity</p>
                        </div>
                    </label>
                </div>
                <div class="form-element">
                    <input type="checkbox" name="area" value="hair" id="hair">
                    <label for="hair">
                        <div class="icon">
                            <i class="fa-solid fa-person"></i>
                            <p class="title">Hair</p>
                        </div>
                    </label>
                </div>
                <div class="form-element">
                    <input type="checkbox" name="area" value="stress" id="stress">
                    <label for="stress">
                        <div class="icon">
                            <i class="fa-solid fa-face-tired"></i>
                            <p class="title">Stress</p>
                        </div>
                    </label>
                </div>
            </div>
            {{!--
        </div> --}}
        </div>
    
        <br>
        <br>
    
        <div style="overflow:auto;">
            <div style="float:center;">
                <button type="button" id="prevBtn" onclick="nextPrev(-1)">Previous</button>
                <button type="button" id="nextBtn" onclick="nextPrev(1)">Next<i
                        class="fa-solid fa-arrow-right"></i></button>
            </div>
        </div>
    
        <!-- Circles which indicates the steps of the form: -->
        <div style="text-align:center;margin-top:40px;">
            <span class="step"></span>
            <span class="step"></span>
            <span class="step"></span>
            <span class="step"></span>
            <span class="step"></span>
        </div>
    
    </form>
</div>


<script>
    var currentTab = 0; // Current tab is set to be the first tab (0)
        showTab(currentTab); // Display the current tab

        function showTab(n) {
            // This function will display the specified tab of the form ...
            var x = document.getElementsByClassName("tab");

            x[n].style.display = "block";
            // ... and fix the Previous/Next buttons:
            if (n == 0) {
                document.getElementById("prevBtn").style.display = "none";
            } else {
                document.getElementById("prevBtn").style.display = "inline";
            }
            if (n == (x.length - 1)) {
                document.getElementById("nextBtn").innerHTML = "Submit";
            } else {
                document.getElementById("nextBtn").innerHTML = "Next";
            }
            // ... and run a function that displays the correct step indicator:
            fixStepIndicator(n)
        }

        function nextPrev(n) {
            // This function will figure out which tab to display
            var x = document.getElementsByClassName("tab");
            // Exit the function if any field in the current tab is invalid:
            //if (n == 1 && !validateForm()) return false;
            // Hide the current tab:
            x[currentTab].style.display = "none";
            // Increase or decrease the current tab by 1:
            currentTab = currentTab + n;
            // if you have reached the end of the form... :
            if (currentTab >= x.length) {
                //...the form gets submitted:
                document.getElementById("regForm").submit();
                return false;
            }
            // Otherwise, display the correct tab:
            showTab(currentTab);
        }

        function validateForm() {
            // This function deals with validation of the form fields
            var x, y, i, valid = true;
            x = document.getElementsByClassName("tab");
            y = x[currentTab].getElementsByTagName("input");
            // A loop that checks every input field in the current tab:
            for (i = 0; i < y.length; i++) {
                // If a field is empty...
                if (y[i].value == "") {
                    // add an "invalid" class to the field:
                    y[i].className += " invalid";
                    // and set the current valid status to false:
                    valid = false;
                }
            }
            // If the valid status is true, mark the step as finished and valid:
            if (valid) {
                document.getElementsByClassName("step")[currentTab].className += " finish";
            }
            return valid; // return the valid status
        }

        function fixStepIndicator(n) {
            // This function removes the "active" class of all steps...
            var i, x = document.getElementsByClassName("step");
            for (i = 0; i < x.length; i++) {
                x[i].className = x[i].className.replace(" active", "");
            }
            //... and adds the "active" class to the current step:
            x[n].className += " active";
        }

        function ensureOneCheck(checkBoxName, messageId, submitId) {
                const checkBoxes = $('[name=' + checkBoxName + ']');
                let checkCount = 0;
                for (let i = 0; i < checkBoxes.length; i++) {
                    if (checkBoxes[i].checked)
                        checkCount++;
                }
                if (checkCount === 0) {
                    $('#' + messageId).show();
                    $('#' + submitId).prop('disabled', true);
                    return false;
                } else {
                    $('#' + messageId).hide();
                    $('#' + submitId).prop('disabled', false);
                    return true;
                }
        }
    

</script>